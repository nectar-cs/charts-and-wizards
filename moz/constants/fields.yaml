

network:
  strategy:
    type:
      question: "Access through Ingress, LoadBalancer, or ClusterIP"
      before_signals:
        - "ClusterIP -> * -> before: delete existing svc"
        - "Ingress -> ClusterIP ensure delete NodePort"
      after_signals: "if !ClusterIP wait until IP becomes available"

app:
  performance_profile:
    input_type: select
    options:
      ultra: "Nothing held back"
      mainstream: "Some room for spikes"
      budget: "Strict limits, low replication"

  ingress:
    host:
      question: "What host should the app be available at?"
      input_type: string
      res:
        - "ingress:{my_ingress}"

    secret:
      question: "Secret for TLS"
      input_type: select


storage:

  strategy:
    create_pvc:
      handler: change_storage_strategy
      helm_key: storage.create_pvc
      question: "Have Mosaic create its own PersistentVolumeClaim?"
      info: "An PersistentVolumeClaim is a Kubernetes resource used to allocate storage."
      input_type: boolean
      on:
        - false:
            message: "You will be responsible for managing the PVC over time."
            tone: "warning"

    locate_external_db:
      info: "The database must be PostgreSQL version 9.2 or above"
      user:
        question: "Database Username"



  backups:
    enabled:
      type: boolean
      question: "Enable automatic database backups?"
      on:
        false: "Warning, you really ought to"
      signals: true -> false -> update the job thing, ask if delete ?

    create_volume:
      question: "Create a new volume, or use an existing one?"
      info: "Choose to use an existing one means that..."
      signals: true -> false -> ask if delete existing?
      options:
        true: "Create "
        false: "Use existing"

    locate_volume:
      question: ""

  database_secrets:
    user:
      backed: false
      input_type: string
      question: "Database username"
      info: "You should blah blah"
      allow_blank: true
      on:
        blank: "Very insecure"

    password:
      input_type: string
      question: "Database password"
      info: "You should blah blah"

